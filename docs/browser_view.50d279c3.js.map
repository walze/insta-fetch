{"version":3,"sources":["../helpers.js","lazyload.js","index.js"],"names":["chunkArr","arr","len","i","chunks","n","length","push","slice","downloadJson","exportObj","exportName","dataStr","encodeURIComponent","JSON","stringify","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","mapObj","obj","cb","key","hasOwnProperty","item","mapFindObj","bool","shuffle","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","resolution2Ratio","w","h","gcd","r","sortAsc","a","b","toggleClassName","el","className","hasClass","classList","contains","add","toggleHide","needsFallback","window","IntersectionObserver","renderImg","imgElement","dataset","srcset","src","runLazyloader","lazyElements","querySelectorAll","map","IO","entries","forEach","isIntersecting","target","observe","bind","$imgs","querySelector","getPaths","Object","path","photos","Map","_photos","_ps","set","split","console","log","img","Image","width"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHA,aAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,mBAAA,EAVP,IAAMO,EAAgB,WAAM,OAACC,OAAOC,sBAI9BC,EAAY,SAAAC,GACVA,EAAWC,QAAQC,SAAQF,EAAWE,OAASF,EAAWC,QAAQC,QAClEF,EAAWC,QAAQE,MAAKH,EAAWG,IAAMH,EAAWC,QAAQE,MAIvDC,EAAgB,WACrB,GAAkB,oBAAXP,OAAP,CAEEQ,IAAAA,EAAmBhD,EAAAA,SAASiD,iBAAiB,8BAC/CV,GAAAA,IAAiB,OAAOS,EAAaE,IAAIR,GAEvCS,IAAAA,EAAK,IAAIV,qBACX,SAAAW,GAAWA,OAAAA,EAAQC,QAAQ,SAAgC,GAA7BC,IAAAA,EAAAA,EAAAA,eAAgBC,EAAAA,EAAAA,OACtCD,GAAgBZ,EAAUa,OAItCP,EAAaE,IAAIC,EAAGK,QAAQC,KAAKN,MAZ9B,QAAA,cAAA;;ACoBP,aA9BA,IAAA,EAAA,QAAA,gBAEA,EAAA,EAAA,QAAA,mCAEA,EAAA,QAAA,cA0BA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wDAAA,SAAA,EAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,CAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAxBA,IAAMO,EAAQ1D,SAAS2D,cAAc,SAE/BC,EAAW,SAAApD,GAAOqD,OAAAA,OAAOT,QAAQ5C,GAAK0C,IAAI,SAAA,GAAcY,OAAd,EAAA,EAAA,GAAA,MAE1CC,EAAS,IAAIC,IACbC,EAAUL,EAASM,EAAD,SAExBD,EAAQf,IAAI,SAAAY,GAAQC,OAAAA,EAAOI,IAAIL,EAAKM,MAAM,KAAK,GAAIN,KAEnDO,QAAQC,IAAIP,EAAQE,EAAQ5E,SAE5B,EAAQwE,EAAAA,SAAAA,OAAOT,QAAQc,EAAf,UACHhB,IAAI,SAAc,GAAA,IAAVY,EAAU,EAAA,EAAA,GAAA,GACTS,EAAM,IAAIC,MAEhBD,EAAI3B,QAAQE,IAAMgB,EAClBS,EAAIE,MAAQ,IAEZf,EAAMtD,YAAYmE,MAM1B,EAAA,EAAA","file":"browser_view.50d279c3.js","sourceRoot":"../src/browser_view","sourcesContent":["/** @type {<T>(arr: T[], len: number) => T[][]} */\nexport const chunkArr = (arr, len) => {\n    const chunks = []\n    const n = arr.length\n\n    let i = 0\n    while (i < n) chunks.push(arr.slice(i, i += len))\n\n    return chunks\n}\n\nexport const downloadJson = (exportObj, exportName) => {\n    const dataStr = 'data:text/jsoncharset=utf-8,' + encodeURIComponent(JSON.stringify(exportObj))\n    const downloadAnchorNode = document.createElement('a')\n\n    downloadAnchorNode.setAttribute('href', dataStr)\n    downloadAnchorNode.setAttribute('download', exportName + '.json')\n\n    document.body.appendChild(downloadAnchorNode)\n\n    downloadAnchorNode.click()\n    downloadAnchorNode.remove()\n}\n\n/**\n * @template T, S\n * @param { T } obj\n * @param { (item: keyof T, property: string) => S } cb\n * @returns { S[] }\n */\nexport function mapObj(obj, cb) {\n    const arr = []\n\n    for (const key in obj) if (obj.hasOwnProperty(key)) {\n        const item = obj[key]\n\n        arr.push(cb(item, key))\n    }\n\n    return arr\n}\n\n/**\n * @template T\n * @param { T } obj\n * @param { (item: keyof T, property: string) => boolean } cb\n * @returns { [keyof T, string] }\n */\nexport function mapFindObj(obj, cb) {\n    for (const key in obj) if (obj.hasOwnProperty(key)) {\n        const item = obj[key]\n\n        const bool = cb(item, key)\n\n        if (bool) return [item, key]\n    }\n\n    return null\n}\n\n/**\n * Randomly shuffle an array\n * https://stackoverflow.com/a/2450976/1293256\n * @template T\n * @param  { T[] } arr The array to shuffle\n * @return { T[] }      The first item in the shuffled array\n */\nexport const shuffle = arr => {\n    const array = [...arr]\n\n    let currentIndex = array.length\n    let temporaryValue, randomIndex\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n        // Pick a remaining element...\n        randomIndex = Math.floor(Math.random() * currentIndex)\n        currentIndex -= 1\n\n        // And swap it with the current element.\n        temporaryValue = array[currentIndex]\n        array[currentIndex] = array[randomIndex]\n        array[randomIndex] = temporaryValue\n    }\n\n    return array\n}\n\n/**\n * @param { number } w \n * @param { number } h \n * @returns { number[] } [width, height, total]\n */\nexport const resolution2Ratio = (w, h) => {\n    const gcd = (w, h) => (h == 0) ? w : gcd(h, w % h)\n    const r = gcd(w, h)\n\n    return [\n        w / r,\n        h / r,\n        r\n    ]\n}\n\nexport const sortAsc = (a, b) => {\n    if (a > b) return 1\n    if (a < b) return -1\n\n    return 0\n}\n\n/**\n * @param { HTMLElement } el\n * @param { string } className\n */\nexport const toggleClassName = (el, className) => {\n    const hasClass = el.classList.contains(className)\n\n    hasClass\n        ? el.classList.remove(className)\n        : el.classList.add(className)\n\n    return hasClass\n}\n\nexport const toggleHide = el => toggleClassName(el, 'hidden') ","const needsFallback = () => !window.IntersectionObserver\n\n\n/** @param {HTMLImageElement} imgElement */\nconst renderImg = imgElement => {\n    if (imgElement.dataset.srcset) imgElement.srcset = imgElement.dataset.srcset\n    if (imgElement.dataset.src) imgElement.src = imgElement.dataset.src\n}\n\n\nexport const runLazyloader = () => {\n    if (typeof window === 'undefined') return\n\n    const lazyElements = [...document.querySelectorAll('[data-srcset], [data-src]')]\n    if (needsFallback()) return lazyElements.map(renderImg)\n\n    const IO = new IntersectionObserver(\n        entries => entries.forEach(({ isIntersecting, target }) => {\n            if (isIntersecting) renderImg(target)\n        }),\n    )\n\n    lazyElements.map(IO.observe.bind(IO))\n}\n","import { shuffle } from './../helpers'\n\nimport _ps from '../node/filtered_photos/**.png'\n\nimport { runLazyloader } from './lazyload'\n\nconst $imgs = document.querySelector('.imgs')\n\nconst getPaths = obj => Object.entries(obj).map(([, path]) => path)\n\nconst photos = new Map\nconst _photos = getPaths(_ps)\n\n_photos.map(path => photos.set(path.split('.')[0], path))\n\nconsole.log(photos, _photos.length)\n\nshuffle(Object.entries(_ps))\n    .map(([, path]) => {\n        const img = new Image()\n\n        img.dataset.src = path\n        img.width = 160\n\n        $imgs.appendChild(img)\n    })\n\n\n\n\nrunLazyloader()"]}